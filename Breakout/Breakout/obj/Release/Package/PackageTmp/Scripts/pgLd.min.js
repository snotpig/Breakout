"use strict"; function start() { canvas.style.display = "block", banner.style.display = "none", breakout() } function loadHiScores() { var a = new XMLHttpRequest; a.onreadystatechange = function () { 4 == this.readyState && 200 == this.status && (hiScores = JSON.parse(a.responseText), displayScores()) }, a.open("GET", "/Scores/get", !0), a.send() } function displayScores() { for (var a = 0; a < hiScores.length; a++) document.getElementById("hs_n" + a).innerHTML = hiScores[a].name, document.getElementById("hs_s" + a).innerHTML = hiScores[a].score } function checkHi() { var a = hiScores.length; (a < 6 || a && score > hiScores[a - 1].score) && setTimeout(function () { hiScore = !0, fullWidth = !1, adjustWidth(), document.getElementById("hs_list").style.display = "none", document.getElementById("hs_dlg").style.display = "block", document.getElementById("btn_submit").addEventListener("click", submitScore) }, 700) } function submitScore(a) { var b = document.getElementById("txt_name").value.replace(/[\"<>]+/g, "_"), c = new XMLHttpRequest; c.onreadystatechange = function () { 4 == this.readyState && 200 == this.status && (hiScores = JSON.parse(c.responseText), document.getElementById("hs_dlg").style.display = "none", document.getElementById("hs_list").style.display = "block", displayScores(), hiScore = !1) }, c.open("POST", "/Scores/add", !0), c.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); var d = "score=" + score + "&name=" + b; c.send(d) } function dblClick() { fullWidth = !fullWidth, adjustWidth() } function pKeyUp(a) { 27 === a.charCode ? (fullWidth = !1, adjustWidth()) : hiScore && 13 === a.keyCode && submitScore(a), keyUp(a) } function adjustWidth() { if (fullWidth && window.innerWidth > width) if (window.innerHeight > .66 * window.innerWidth) canvas.style.width = "100%"; else { var a = Math.floor(1.5 * window.innerHeight); banner.style.width = canvas.style.width = a + "px", banner.style.height = .66 * a + "px" } else banner.style.width = canvas.style.width = "600px", banner.style.height = "400px" } var btn = document.getElementById("btn"), canvas = document.getElementById("canvas"), banner = document.getElementById("game"), hsTable = document.getElementById(hs_tbl), fullWidth = !1, hiScores = [], hiScore = !1; btn.addEventListener("click", start, !1), canvas.addEventListener("dblclick", dblClick, !1), banner.addEventListener("dblclick", dblClick, !1), document.addEventListener("keyup", pKeyUp, !1), Math.sign || (Math.sign = function (a) { return a = +a, 0 === a || isNaN(a) ? Number(a) : a > 0 ? 1 : -1 }), Array.prototype.findIndex || Object.defineProperty(Array.prototype, "findIndex", { value: function (a) { if (null == this) throw new TypeError('"this" is null or not defined'); var b = Object(this), c = b.length >>> 0; if ("function" != typeof a) throw new TypeError("predicate must be a function"); for (var d = arguments[1], e = 0; e < c;) { var f = b[e]; if (a.call(d, f, e, b)) return e; e++ } return -1 } });